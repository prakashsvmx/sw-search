(this["webpackJsonpsw-search"]=this["webpackJsonpsw-search"]||[]).push([[0],{59:function(e,t,n){e.exports=n(90)},90:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),s=(n(64),n(13)),l=n(14),i=n(28),u=n(21),m=n(29),p=n(16),f=n(11),h=n.n(f),g=n(15),v=n(22),d=n.n(v),E={PEOPLE:"".concat("https://swapi.co/api","/people"),PLANETS:"".concat("https://swapi.co/api","/planets")},b=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"getUserInfo",value:function(){var e=sessionStorage.getItem("userInfo");return e?JSON.parse(e):e}},{key:"logout",value:function(){return sessionStorage.removeItem("userInfo"),null}},{key:"login",value:function(){var e=Object(g.a)(h.a.mark((function e(t){var n,a,r,c,o,s,l,i,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userName,a=t.password,e.next=3,d.a.get("".concat(E.PEOPLE,"?name=").concat(encodeURIComponent(n)));case 3:if(r=e.sent,c=r.data.results,o=null,c.length)for(s=0;s<c.length;s+=1)l=c[s],i=l.name,(u=l.birth_year)===a&&i===n&&(o={name:i,birthYear:u},sessionStorage.setItem("userInfo",JSON.stringify(o)));return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),y=n(20),w=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"searchPlanets",value:function(){var e=Object(g.a)(h.a.mark((function e(t){var n,a,r,c,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.searchText,a=t.page,r=a?"&page=".concat(a):"",c="".concat(E.PLANETS,"?search=").concat(encodeURIComponent(n)).concat(r),e.next=5,d.a.get(c);case 5:return o=e.sent,s=o.data,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),O=n(98),k=n(96),x=n(100),j=function(e){var t=e.info,n=t.name,a=t.population,c=t.rotation_period,o=t.orbital_period,s=t.climate,l=t.gravity,i=t.terrain,u=t.surface_water,m=t.residents,p=t.films,f=20;return"unknown"!=="".concat(a).toLowerCase()&&(f=(f=(f=Math.round(Number.parseInt(a)/1e7))<20?20:f)>100?100:f),r.a.createElement(k.a,{trigger:"click",key:n,placement:"right",rootClose:!0,rootCloseEvent:"mousedown",overlay:r.a.createElement(x.a,{id:"popover-positioned-".concat(n),rootClose:!0,rootCloseEvent:"mousedown"},r.a.createElement(x.a.Title,{as:"h3"},n),r.a.createElement(x.a.Content,null,r.a.createElement("div",{style:{display:"flex",flexFlow:"column"}},r.a.createElement("span",null,"Rotation period: ",c),r.a.createElement("span",null,"Orbital period : ",o),r.a.createElement("span",null,"Climate : ",s),r.a.createElement("span",null," Gravity : ",l),r.a.createElement("span",null,"Terrain : ",i),r.a.createElement("span",null,"Surface Water: ",u),r.a.createElement("span",null,m.length," Resident(s)"),r.a.createElement("span",null,p.length," Film(s)"))))},r.a.createElement("div",null,r.a.createElement(O.a,{size:f,color:"#FDA7DC"}),n))},S=n(93),C=n(94),I=n(53),P=function(e){var t=e.list,n=void 0===t?[]:t;return r.a.createElement(S.a,null,r.a.createElement(C.a,null,n.map((function(e){return r.a.createElement(I.a,null,r.a.createElement(j,{info:e}))}))))},U=n(97),L=n(95),T=n(56),N=n(99),D=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={planetsData:{},searchText:"",fetchCount:0,isLoading:!1,currentPage:1},n.setSearchText=function(e){var t=e.target.value;n.setState((function(e){var n=e.fetchCount+1;return sessionStorage.setItem("fetchCount",n),1===n&&sessionStorage.setItem("lastFetchTime",new Date),{searchText:t,fetchCount:n}}),n.initFetch)},n.timeDiffInMinutes=function(e,t){var n=(e.getTime()-t.getTime())/1e3;return n/=60,Math.abs(Math.round(n))},n.isValidFetch=function(){},n.initFetch=function(){n.setState({planetsData:{},isLoading:!0},n.fetchPlanets)},n.fetchPlanets=Object(g.a)(h.a.mark((function e(){var t,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.searchText,r=t.currentPage,!(a.length>0)){e.next=14;break}return e.prev=2,e.next=5,w.searchPlanets({searchText:a,page:r});case 5:c=e.sent,n.setState((function(){return{planetsData:c,isLoading:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.setState((function(){return{planetsData:{},isLoading:!1}}));case 12:e.next=15;break;case 14:n.setState((function(){return{planetsData:{},isLoading:!1}}));case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),n.setPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.setState({currentPage:e},n.fetchPlanets)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.logout,a=t.currentUser,c=this.state,o=c.planetsData,s=o.results,l=void 0===s?[]:s,i=o.previous,u=o.next,m=c.isLoading,p=c.currentPage;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(y.a,{to:"/",className:"nav-item nav-link"},"Home"),r.a.createElement("a",{href:"/",onClick:n,className:"nav-item nav-link"},"Logout"))),r.a.createElement(S.a,null,r.a.createElement("h1",null,"Welcome ",a.name),r.a.createElement("p",null,"Start searching to explore the planets .")),r.a.createElement(U.a,{inline:!0}),r.a.createElement(L.a,{className:"mb-3"},r.a.createElement(L.a.Prepend,null,r.a.createElement(L.a.Text,{id:"basic-addon1"},r.a.createElement("span",{role:"img"},"\ud83d\udd0e"))),r.a.createElement(T.a,{type:"text",onChange:this.setSearchText,placeholder:"Search",className:"mr-sm-2"})),m&&r.a.createElement("div",null,"Loading..."),l.length>0&&r.a.createElement(P,{list:l}),r.a.createElement("div",{style:{diplay:"flex",alignItems:"center",justifyContent:"center",margin:"auto",width:"40%"}},r.a.createElement(N.a,null,i&&r.a.createElement(N.a.Prev,{onClick:function(){e.setPage(p-1)}}),u&&r.a.createElement(N.a.Next,{onClick:function(){e.setPage(p+1)}})))))}}]),t}(r.a.Component),F=n(30),M=function(e){var t=e.history,n=Object(a.useState)("Luke Skywalker"),c=Object(F.a)(n,2),o=c[0],s=c[1],l=Object(a.useState)("19BBY"),i=Object(F.a)(l,2),u=i[0],m=i[1],p=Object(a.useState)(!1),f=Object(F.a)(p,2),v=f[0],d=f[1],E=function(){var e=Object(g.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),d(!0),e.next=4,b.login({userName:o,password:u});case 4:a=e.sent,console.log(a),t.push("/"),d(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v?r.a.createElement("h4",null,"Logging in..."):r.a.createElement("div",{style:{marginTop:"1rem"}},r.a.createElement("form",{onSubmit:E},r.a.createElement("input",{type:"text",placeholder:"Enter email address",value:o,onChange:function(e){return s(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Enter email address",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Login"})))},A=n(57),B=function(e){var t=e.component,n=e.logout,a=(e.currentUser,Object(A.a)(e,["component","logout","currentUser"]));return r.a.createElement(p.b,Object.assign({},a,{render:function(e){var a=b.getUserInfo();return a?r.a.createElement(t,Object.assign({},e,{logout:n,currentUser:a})):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},J=n(7),R=Object(J.a)(),W=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).updateUserInfo=function(){n.setState((function(){return{currentUser:b.getUserInfo()}}))},n.logout=function(){b.logout(),n.setState((function(){return{currentUser:null}})),R.push("/login")},n.state={currentUser:null},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.updateUserInfo()}},{key:"componentDidUpdate",value:function(e,t,n){t.currentUser&&this.state.currentUser&&t.currentUser.name!==this.state.currentUser.name&&this.updateUserInfo()}},{key:"render",value:function(){return r.a.createElement(p.c,{history:R},r.a.createElement(B,{exact:!0,path:"/",component:D,logout:this.logout}),r.a.createElement(p.b,{path:"/login",component:M}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.954dcccc.chunk.js.map